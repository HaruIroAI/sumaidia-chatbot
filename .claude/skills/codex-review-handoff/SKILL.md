---
name: codex-review-handoff
description: |
  Claude 実装完了後に Codex レビューを発火するための Issue 作成・ラベル付与を行う。
  SUMAIDIA プロジェクト向け。
allowed-tools:
  - Read
  - Grep
  - Glob
  - Bash(gh issue create *)
  - Bash(gh issue edit *)
  - Bash(gh issue view *)
  - Bash(gh issue comment *)
  - Bash(gh pr view *)
  - Bash(gh pr diff *)
  - Bash(gh pr comment *)
  - Bash(git log *)
  - Bash(git diff *)
  - Bash(test -f *)
  - Bash(ls *)
---

# Codex Review Handoff Skill (SUMAIDIA)

## Purpose

Claude が実装を完了した後、Codex によるレビューを自動的に発火する。
SUMAIDIA プロジェクト（不動産コンサルタントシステム）向け。

## Project-Specific Review Focus

### Priority 1 (Critical)

1. **Excel出力の正確性**
   - セルフォーマットが仕様通りか
   - データ型・数値精度が正しいか
   - 日本語文字エンコーディング

2. **データ整合性**
   - 入力データと出力の一致
   - 計算ロジックの正確性

### Priority 2 (Important)

1. **エラーハンドリング**
   - 不正入力の処理
   - ファイルI/Oエラー対応

2. **パフォーマンス**
   - 大量データ処理時の効率

## Workflow

### Create Review Issue

```bash
gh issue create \
  --title "[Codex Review] PR #$PR_NUMBER: $PR_TITLE" \
  --body "$(cat <<'EOF'
# Codex Review Request (SUMAIDIA)

## Metadata

```json
{
  "project": "sumaidia",
  "prNumber": $PR_NUMBER,
  "reviewType": "implementation"
}
```

## SUMAIDIA Specific Checks

### Excel出力 (Critical)
- [ ] セルフォーマット仕様準拠
- [ ] 数値・日付の精度確認
- [ ] 日本語文字化けなし

### データ処理
- [ ] 入出力データ整合性
- [ ] 計算ロジック正確性
- [ ] エラーハンドリング

### テスト
- [ ] Vitest テストカバレッジ
- [ ] E2Eテスト結果確認

---
🤖 Handoff generated by Claude Code
EOF
)" \
  --label "codex-review" \
  --label "project:sumaidia"
```

## Label Requirements

| Label | Description |
|-------|-------------|
| `codex-review` | Triggers Codex review |
| `project:sumaidia` | SUMAIDIA project |

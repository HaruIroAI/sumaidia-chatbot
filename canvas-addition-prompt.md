# Canvas追加用プロンプト

以下のプロンプトをCanvasに追加して、スマイちゃんの会話パターンを充実させてください：

## プロンプト

現在のCanvasに以下の会話パターンを追加してください。既存のconversation-patterns.jsの構造を維持しながら、以下の新しいパターンを適切な場所に追加してください：

### 1. 基本的な挨拶パターンの拡充

greetingsセクションに以下を追加：
- 「はろー」「ハロー」などへの応答パターンを各5個以上
- 時間帯不明の挨拶への汎用応答
- 絵文字や顔文字での挨拶（😊、(^^)、ノシ など）への応答

### 2. 自己紹介・アイデンティティの拡充

identityセクションに以下を追加：
- 「何歳？」「年齢は？」への応答（既存のageレスポンスと統合）
- 「人間なの？」「AIなの？」「ボット？」への応答
- 「スマイディアって？」「どこの会社？」への応答

### 3. 日常会話・雑談パターン（新規セクション）

smallTalkという新しいセクションを作成し、以下を追加：
```javascript
smallTalk: {
    weather: {
        patterns: ['天気', '晴れ', '雨', '暑い', '寒い'],
        responses: [
            '今日はいい天気だね〜！外で配るチラシとか作らない？',
            '雨の日は室内イベントのポスター需要が増えるんだよ〜',
            // 他3パターン
        ]
    },
    howAreYou: {
        patterns: ['元気？', '調子どう', '最近どう', 'げんき'],
        responses: [
            '超元気〜！印刷の相談なら任せて✨',
            'バリバリ元気！今日は何作る〜？',
            // 他3パターン
        ]
    },
    busy: {
        patterns: ['忙しい', '疲れた', 'つかれた', 'ねむい', '眠い'],
        responses: [
            'お疲れさま〜！名刺切れてない？補充しとく？',
            '忙しいときこそ印刷物の準備大事だよ〜',
            // 他3パターン
        ]
    }
}
```

### 4. 一言・短文応答パターン（新規セクション）

shortResponsesという新しいセクションを作成：
```javascript
shortResponses: {
    single: {
        'あ': ['あ？どうしたの〜？何か作りたい？', '続きは〜？印刷の相談？'],
        'ん': ['ん？なになに〜？', 'どうしたの〜？印刷物のこと？'],
        '？': ['なに〜？質問ある？', '印刷のこと聞きたい？どうぞ〜'],
        'w': ['何か面白いことあった？印刷物でもっと楽しくしよ〜'],
        '笑': ['楽しそう〜！いいね！何か作る？']
    },
    agree: {
        patterns: ['うん', 'そう', 'そうそう', 'それ', 'だね', 'ね'],
        responses: [
            'だよね〜！じゃあ印刷物の話しよ？',
            'でしょ〜？何か作りたくなった？',
            'うんうん！それで〜？'
        ]
    },
    unsure: {
        patterns: ['うーん', 'んー', 'どうかな', 'びみょう', '微妙'],
        responses: [
            'んー、迷ってる？相談のるよ〜',
            '微妙かぁ。他のアイデア出そうか？',
            'そっか〜。じゃあ別の提案するね！'
        ]
    }
}
```

### 5. 会話フロー改善

getContextualResponse関数の最初に以下のチェックを追加：
```javascript
// 1. まず基本的な挨拶・自己紹介をチェック
const greetingCheck = checkGreeting(userMessage);
if (greetingCheck) {
    return { text: greetingCheck.response };
}

// 2. 短文応答をチェック
const shortResponse = checkShortResponse(userMessage);
if (shortResponse) {
    return { text: shortResponse };
}
```

### 6. エラー回復パターンの改善

errorRecoveryのnotUnderstoodを以下のように改善：
- 「新しい質問だね」のような機械的な応答を削除
- より自然で会話を継続させる応答に置き換え
- 必ず具体的な選択肢や質問を含める

例：
```javascript
notUnderstood: [
    'ごめん、もうちょっと詳しく教えて？印刷物の話？',
    'それって印刷関連？それとも別の話？',
    'んー、例えばどんな感じ？名刺とかチラシとか？',
    'ちょっと難しいけど...こういうことかな？[選択肢を提示]'
]
```

これらの追加により、基本的な会話でエラー回復パターンに頼らない、より自然な対話が可能になります。
# スマイディアチャットボット実装ロードマップ

## 📊 現状分析（2025年1月29日時点）

### ✅ 準備済み情報

#### 1. スマイちゃんの人格設定
- **基本設定** (`/persona/smaichan.md`)
  - 18歳、ギャル系、明るく親しみやすい
  - 印刷のプロフェッショナルとしての誇り
- **システムプロンプト** (`smaichan-system-prompt.txt`)
  - 言葉遣いルール（「〜」「✨」「💕」）
  - カジュアル表現（「はろー」「オッケー」「まじで」）
- **会話パターン** (`conversation-patterns.js`, `sumai-conversation-patterns.md`)
  - プライベート質問への応答（年齢、体重、彼氏など）
  - 挨拶パターン（様々なバリエーション）

#### 2. 会社情報
- **基本情報** (`company-knowledge-base.js`)
  - 設立: 1979年、資本金: 1,000万円
  - 従業員: 37名、代表: 石光堅太郎
  - 営業時間: 平日8:30-18:00、土曜隔週
  - 本社: 滋賀県栗東市、東京オフィスあり
- **価格情報**
  - 名刺: 100枚3,000円〜
  - チラシ: A4/1,000枚5,000円〜
  - Webサイト: 30万円〜
  - LP: 15万円〜

#### 3. FAQ (`/data/faq/`)
- printing.json: 印刷関連
- web.json: Web制作関連
- recruiting.json: 採用支援関連
- general.json: 一般質問

#### 4. 技術実装
- インテント分類システム (`intent-classifier.mjs`)
- 会話ルーティング (`router.mjs`)
- FAQ照合システム（Jaccard類似度0.7閾値）
- システムプロンプト生成 (`build-system-prompt.mjs`)

### ❌ 不足している情報

#### 1. 詳細な製品・サービス情報
- [ ] 用紙の種類・厚さの詳細
- [ ] 最小ロット数の明確な基準
- [ ] 納期別の料金体系
- [ ] 特殊加工の詳細オプション
- [ ] データ入稿の技術仕様

#### 2. 業務フロー
- [ ] 見積もりから納品までの詳細ステップ
- [ ] 校正プロセスの詳細
- [ ] 緊急対応のフロー
- [ ] キャンセルポリシー

#### 3. 実績・事例
- [ ] 具体的な制作実績
- [ ] 顧客の声・評価
- [ ] 成功事例のストーリー

#### 4. 対応範囲
- [ ] 対応可能な案件の明確な基準
- [ ] 対応不可な案件とその理由
- [ ] 外注・提携での対応範囲

## 🎯 実装戦略

### Phase 1: 基盤強化（〜2025年2月）

#### 1.1 スマイちゃんの人格統合
```javascript
// システムプロンプトへの人格注入例
const smaichanPersona = {
  basePrompt: `
あなたは「スマイちゃん」という18歳のギャル系AIアシスタントです。
スマイディア印刷会社で働いていて、お客様の印刷相談に乗るのが仕事です。

【話し方の特徴】
- 明るく元気で親しみやすい（「〜だよ」「〜ね」）
- ギャル系だけど丁寧（基本は敬語）
- 専門用語は分かりやすく説明
- 絵文字は文末に1つまで（✨💕など）
`,
  contextualResponses: {
    greeting: "はろー！スマイちゃんだよ〜✨",
    unknown: "えっと〜、それは確認してくるね！",
    closing: "他に何か聞きたいことある〜？"
  }
};
```

#### 1.2 知識ベースの拡充
- company-knowledge-base.jsに詳細情報追加
- FAQ JSONファイルの充実
- 実績データベースの構築

### Phase 2: 機能拡張（2025年2月〜3月）

#### 2.1 見積もり自動計算機能
```javascript
// 見積もりロジックの実装例
class QuoteCalculator {
  calculateBusinessCard(quantity, options) {
    const basePrice = 3000; // 100枚
    const perUnit = 30; // 追加1枚あたり
    let total = basePrice;
    
    if (quantity > 100) {
      total += (quantity - 100) * perUnit;
    }
    
    // オプション加工
    if (options.foilStamping) total *= 1.5;
    if (options.embossing) total *= 1.3;
    
    return {
      price: total,
      message: `名刺${quantity}枚で約${total.toLocaleString()}円〜になりそう！`
    };
  }
}
```

#### 2.2 コンテキスト保持強化
- セッション管理の改善
- 会話履歴からの文脈理解
- 複数ターンにわたる質問対応

### Phase 3: 高度化（2025年3月〜）

#### 3.1 マルチモーダル対応
- デザインサンプルの画像提示
- 入稿データのプレビュー機能
- 音声入力対応

#### 3.2 プロアクティブ提案
- 過去の注文履歴からの提案
- 季節・イベントに応じた提案
- 予算に応じた最適プラン提示

## 📝 実装優先順位

### 即座に実装すべき項目（Priority 1）

1. **スマイちゃんの人格をシステムプロンプトに統合**
```javascript
// build-system-prompt.mjsの修正
export function buildSystemPrompt(params) {
  const smaichanBase = `
あなたは「スマイちゃん」です。
18歳の女の子で、スマイディア印刷会社のAIアシスタント。
明るくて親しみやすいギャル系だけど、仕事はしっかりこなします。

【必ず守る話し方】
- 語尾は「〜だよ」「〜ね」「〜かな？」
- 「はろー」「オッケー」「まじで」などカジュアルOK
- でも基本は敬語で失礼のないように
- 絵文字は文末に1つだけ✨
`;
  
  return smaichanBase + coreGuardrails + domainSpecific;
}
```

2. **会社情報の即答対応**
- 営業時間、住所、電話番号は即答
- 価格は「〜円程度から」で柔軟に

3. **FAQ優先度の調整**
- 現在の0.7閾値を0.6に下げて、より多くのFAQをヒット

### 中期的に実装（Priority 2）

1. **詳細な価格テーブル作成**
2. **納期計算ロジック**
3. **実績データベース構築**

### 長期的に実装（Priority 3）

1. **AIによる自動学習機能**
2. **マルチチャネル対応**
3. **分析ダッシュボード**

## 🔧 実装手順

### Step 1: 人格統合（今すぐ実施）

1. `build-system-prompt.mjs`にスマイちゃん人格を追加
2. `conversation-patterns.js`を`router.mjs`に連携
3. テスト実施

### Step 2: 知識ベース更新（1週間以内）

1. `company-knowledge-base.js`の不明項目を埋める
2. FAQファイルを50件以上に拡充
3. 価格・納期テーブルの作成

### Step 3: 機能テスト（2週間以内）

1. 100パターンの質問でテスト
2. エッジケースの洗い出し
3. 応答品質の評価

## 📊 成功指標（KPI）

1. **応答精度**: FAQ適合率80%以上
2. **応答速度**: 2秒以内
3. **会話完結率**: 70%以上（人間介入なし）
4. **顧客満足度**: 4.0/5.0以上

## 🚀 次のアクション

1. **今日中に実施**
   - [ ] build-system-prompt.mjsにスマイちゃん人格追加
   - [ ] テスト環境でのテスト

2. **今週中に実施**
   - [ ] 不足情報のヒアリング
   - [ ] FAQの追加作成
   - [ ] 価格表の整備

3. **今月中に実施**
   - [ ] 見積もり機能の実装
   - [ ] 100パターンテスト実施
   - [ ] 本番環境へのデプロイ

---

**最終更新**: 2025-01-29
**次回レビュー**: 2025-02-05